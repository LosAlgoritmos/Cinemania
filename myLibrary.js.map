{"version":3,"file":"myLibrary.js","sources":["../src/js/my-library.js","../src/myLibrary.js"],"sourcesContent":["// edited by @yesimbozkurt\r\n import { renderMovieInfoPopup } from './infoPopup.js';\r\n import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    showLoader();\r\n\r\n    // { \"backdrop_path\": \"/2Nti3gYAX513wvhp8IiLL6ZDyOm.jpg\", \"id\": 950387, \"title\": \"A Minecraft Movie\", \"original_title\": \"A Minecraft Movie\", \"overview\": \"Four misfits find themselves struggling with ordinary problems when they are suddenly pulled through a mysterious portal into the Overworld: a bizarre, cubic wonderland that thrives on imagination. To get back home, they'll have to master this world while embarking on a magical quest with an unexpected, expert crafter, Steve.\", \"poster_path\": \"/yFHHfHcUgGAxziP1C3lLt0q2T4s.jpg\", \"media_type\": \"movie\", \"adult\": false, \"original_language\": \"en\", \"genre_ids\": [10751, 35, 12, 14], \"popularity\": 992.0749, \"release_date\": \"2025-03-31\", \"video\": false, \"vote_average\": 6.086, \"vote_count\": 273 }\r\n\r\n    const myLibrary = JSON.parse(localStorage.getItem('myLibrary')) || [];\r\n\r\n    // mylibrary.html sayfasındaki elementler\r\n    const genres = document.getElementById('filters');\r\n    const movieList = document.querySelector('.library-content');\r\n    const loadMoreBtn = document.querySelector('.load-more-btn');\r\n    const genre = document.querySelector('#genre');\r\n\r\n    const numberOfMovies = 9; // Her seferinde gösterilecek film sayısı\r\n    let currentPage = 1; // Başlangıç sayfası\r\n\r\n    // library html sayfası (film yoksa görünecek sayfa)\r\n    const emptyLibrary = document.getElementById('empty-library');\r\n    const searchMovieBtn = document.getElementById('go-to-catalog-btn');\r\n\r\n\r\n    if (myLibrary.length === 0) {\r\n        // Film yoksa, sadece varsayılan ekranı göster\r\n        emptyLibrary.style.display = 'flex';\r\n        genres.style.display = 'none';\r\n        movieList.style.display = 'none';\r\n        loadMoreBtn.style.display = 'none';\r\n        searchMovieBtn.style.display = 'block'; // \"Go to Catalog\" butonunu göster\r\n        searchMovieBtn.addEventListener('click', function () {\r\n            window.location.href = 'index.html'; // Katalog sayfasına yönlendir\r\n        });\r\n        return;\r\n    } else {\r\n        // Film varsa, varsayılan ekranı gizle ve dropdown/load more'u göster\r\n        emptyLibrary.style.display = 'none';\r\n        searchMovieBtn.style.display = 'none'; // \"Go to Catalog\" butonunu gizle\r\n        genres.style.display = 'flex';\r\n        movieList.style.display = 'flex';\r\n        loadMoreBtn.style.display = 'flex';\r\n    }\r\n\r\n    renderLibrary(myLibrary.slice(0, numberOfMovies)); // İlk sayfayı göster\r\n    if (myLibrary.length > numberOfMovies) {\r\n        loadMoreBtn.style.display = 'block';\r\n    } else {\r\n        loadMoreBtn.style.display = 'none';\r\n    }\r\n\r\n    // Dropdown menüsünü oluştur\r\n    genre.addEventListener('change', e => {\r\n        const genreId = e.target.value;\r\n        const filteredMovies = genreId === 'all'\r\n            ? myLibrary.slice(0, currentPage * numberOfMovies)\r\n            : myLibrary.filter(movie => movie.genre_ids.includes(parseInt(genreId)));\r\n        if (filteredMovies.length === 0) {\r\n            movieList.innerHTML = ''; // Eğer filtrelenmiş film yoksa, listeyi temizle\r\n            loadMoreBtn.style.display = 'none';\r\n        }\r\n        else {\r\n            loadMoreBtn.style.display = 'block';\r\n            renderLibrary(filteredMovies);\r\n        }\r\n    })\r\n\r\n    // Load more butonuna tıklama olayı ekle\r\n    loadMoreBtn.addEventListener('click', function () {\r\n        currentPage++;\r\n        const newMovies = myLibrary.slice(0, currentPage * numberOfMovies);\r\n        renderLibrary(newMovies);\r\n\r\n        if (newMovies.length >= myLibrary.length) {\r\n            loadMoreBtn.style.display = 'none';\r\n        }\r\n\r\n    });\r\n});\r\n\r\nfunction renderLibrary(movies, append = false) {\r\n    // Eğer append true ise, mevcut filmleri koru ve yeni filmleri ekle\r\n\r\n    const movieList = document.querySelector(\".library-content\")\r\n\r\n    if (!append) {\r\n        movieList.innerHTML = ''; // Sadece append = false ise temizle\r\n    }\r\n    movieList.innerHTML = ''; // Önceki filmleri temizle\r\n\r\n    movies.forEach((movie, index) => {\r\n        const li = document.createElement('li');\r\n        li.className = 'movies__list-item';\r\n        li.style.background = 'linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))';\r\n        li.style.backgroundImage = `url(https://image.tmdb.org/t/p/original/${movie.poster_path})`;\r\n        li.style.backgroundSize = 'cover';\r\n        li.style.backgroundRepeat = 'no-repeat';\r\n        li.style.width = '395px';\r\n        li.style.height = '574px';\r\n        li.style.overflow = 'hidden';\r\n        li.style.borderRadius = '5px';\r\n        li.style.color = 'white';\r\n        li.style.position = 'relative';\r\n        li.style.cursor = 'pointer';\r\n        li.addEventListener('click', e => {\r\n            renderMovieInfoPopup(movie);\r\n        })\r\n        li.innerHTML = `\r\n                        <div class=\"movies__list-item-info\">\r\n                            <div class=\"movies__list-item-info-container\">\r\n                            <h3 class=\"movies__list-item-title\">${movie.title || movie.name}</h3>\r\n                            <p class=\"movies__list-item-description\">${movie.release_date}</p>\r\n                            </div>\r\n                            <div class=\"movies__list-item-rating\">\r\n                             ${Array.from({ length: 5 }, (_, index) =>\r\n            index < Math.round(movie.vote_average)\r\n                ? '<img src=\"./images/star.png\" alt=\"star\">'\r\n                : '<img src=\"./images/star-outline.png\" alt=\"empty star\">'\r\n        ).join('')}\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n        movieList.appendChild(li);\r\n    });\r\n}\r\n\r\n// Film türlerini isimlendiren fonksiyon\r\nfunction getGenreNames(genreIds) {\r\n    const genreMap = {\r\n        28: 'Action',\r\n        12: 'Adventure',\r\n        16: 'Animation',\r\n        35: 'Comedy',\r\n        80: 'Crime',\r\n        99: 'Documentary',\r\n        18: 'Drama',\r\n        10751: 'Family',\r\n        14: 'Fantasy',\r\n        36: 'History',\r\n        27: 'Horror',\r\n        10402: 'Music',\r\n        9648: 'Mystery',\r\n        10749: 'Romance',\r\n        878: 'Science Fiction',\r\n        10770: 'TV Movie',\r\n        53: 'Thriller',\r\n        10752: 'War',\r\n        37: 'Western'\r\n    };\r\n    if (!genreIds || !Array.isArray(genreIds)) return '';\r\n    const mappedGenres = genreIds.map(id => genreMap[id] || 'Unknown');\r\n    return mappedGenres.slice(0, 2).join(', '); // Maksimum 2 genre döndür\r\n}\r\n\r\nwindow.addEventListener('load', () => {\r\n    // Loader'ı gizle\r\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\r\n    setTimeout(() => {\r\n        hideLoader();\r\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\r\n});\r\n\r\n// edited by @yesimbozkurt","// @murselsen\r\nimport './js/navbar.js';\r\n// @AlperKale\r\nimport { showLoader, hideLoader } from './js/loader.js';\r\nimport './js/scroll-up.js';\r\n// @sumeyyeterzi\r\nimport './js/infoPopup.js';\r\n// @yesimbozkurt\r\nimport './js/my-library.js';\r\n// @erdem6161\r\nimport './js/footer.js';\r\nimport './js/members-modal.js';\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // Sayfanın tamamen yüklenmesini bekleyelim\r\n  // Bu sırada showLoader'ı çağırarak loader'ı gösteriyoruz\r\n  showLoader();\r\n  \r\n  // Sayfa tamamen yüklendiğinde loader'ı gizle\r\n  window.addEventListener('load', () => {\r\n    // Loader'ı gizle\r\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\r\n    setTimeout(() => {\r\n      hideLoader();\r\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\r\n  });\r\n});"],"names":["showLoader","myLibrary","genres","movieList","loadMoreBtn","genre","numberOfMovies","currentPage","emptyLibrary","searchMovieBtn","renderLibrary","e","genreId","filteredMovies","movie","newMovies","movies","append","index","li","renderMovieInfoPopup","_","hideLoader"],"mappings":"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"}