{"version":3,"file":"myLibrary.js","sources":["../src/js/my-library.js","../src/myLibrary.js"],"sourcesContent":["// edited by @yesimbozkurt\r\n\r\n//  const options = {\r\n//     method: 'GET',\r\n//     headers: {\r\n//         accept: 'application/json',\r\n//         Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3MzZkMTZjOWU1MTMyNTlkYThmY2Y2MzAwZjFmZWI3OCIsIm5iZiI6MTc0MzcwNjgxNi42NTEsInN1YiI6IjY3ZWVkYWMwYjNlMDM1Mjg2Y2Q5MGQ5YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.ZhiQgrAi8xURVIwPyhgnrhq88KOZAEHcX1G8OwLmwQM'\r\n//     }\r\n// };\r\n\r\n// fetch('https://api.themoviedb.org/3/genre/movie/list?language=en', options)\r\n//     .then(res => res.json())\r\n//     .then(res => console.log(res))\r\n//     .catch(err => console.error(err));\r\n\r\nimport { showLoader, hideLoader, fetchWithLoader } from './loader.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    showLoader();\r\n\r\n    // { \"backdrop_path\": \"/2Nti3gYAX513wvhp8IiLL6ZDyOm.jpg\", \"id\": 950387, \"title\": \"A Minecraft Movie\", \"original_title\": \"A Minecraft Movie\", \"overview\": \"Four misfits find themselves struggling with ordinary problems when they are suddenly pulled through a mysterious portal into the Overworld: a bizarre, cubic wonderland that thrives on imagination. To get back home, they'll have to master this world while embarking on a magical quest with an unexpected, expert crafter, Steve.\", \"poster_path\": \"/yFHHfHcUgGAxziP1C3lLt0q2T4s.jpg\", \"media_type\": \"movie\", \"adult\": false, \"original_language\": \"en\", \"genre_ids\": [10751, 35, 12, 14], \"popularity\": 992.0749, \"release_date\": \"2025-03-31\", \"video\": false, \"vote_average\": 6.086, \"vote_count\": 273 }\r\n\r\n    const myLibrary = JSON.parse(localStorage.getItem('myLibrary')) || [];\r\n\r\n    // mylibrary.html sayfasındaki elementler\r\n    const genres = document.getElementById('filters');\r\n    const movieList = document.getElementById('movie-grid');\r\n    const loadMoreBtn = document.querySelector('.load-more-btn');\r\n\r\n    const numberOfMovies = 9; // Her seferinde gösterilecek film sayısı\r\n    let currentPage = 1; // Başlangıç sayfası\r\n\r\n    // library html sayfası (film yoksa görünecek sayfa)\r\n    const emptyLibrary = document.getElementById('empty-library');\r\n    const searchMovieBtn = document.getElementById('go-to-catalog-btn');\r\n\r\n\r\n    if (myLibrary.length === 0) {\r\n        // Film yoksa, sadece varsayılan ekranı göster\r\n        emptyLibrary.style.display = 'flex';\r\n        genres.style.display = 'none';\r\n        movieList.style.display = 'none';\r\n        loadMoreBtn.style.display = 'none';\r\n        searchMovieBtn.style.display = 'block'; // \"Go to Catalog\" butonunu göster\r\n        searchMovieBtn.addEventListener('click', function () {\r\n            window.location.href = 'index.html'; // Katalog sayfasına yönlendir\r\n        });\r\n        return;\r\n    } else {\r\n        // Film varsa, varsayılan ekranı gizle ve dropdown/load more'u göster\r\n        emptyLibrary.style.display = 'none';\r\n        searchMovieBtn.style.display = 'none'; // \"Go to Catalog\" butonunu gizle\r\n        genres.style.display = 'block';\r\n        movieList.style.display = 'block';\r\n        loadMoreBtn.style.display = 'block';\r\n    }\r\n\r\n    renderLibrary(myLibrary.slice(0, numberOfMovies)); // İlk sayfayı göster\r\n    if (myLibrary.length > numberOfMovies) {\r\n        loadMoreBtn.style.display = 'block';\r\n    } else {\r\n        loadMoreBtn.style.display = 'none';\r\n    }\r\n    // Dropdown menüsünü oluştur\r\n    const uniqueGenres = [...new Set(myLibrary.flatMap(movie => movie.genres))];\r\n    uniqueGenres.forEach(genre => {\r\n        const option = document.createElement('option');\r\n        option.value = genre;\r\n        option.textContent = genre;\r\n        genres.appendChild(option);\r\n    });\r\n    // Dropdown menüsüne tıklama olayı ekle\r\n    genres.addEventListener('change', function () {\r\n        const selectedGenre = this.value;\r\n        const filteredMovies = myLibrary.filter(movie => movie.genres.includes(selectedGenre));\r\n        renderLibrary(filteredMovies);\r\n    });\r\n\r\n    // Load more butonuna tıklama olayı ekle\r\n    loadMoreBtn.addEventListener('click', function () {\r\n        currentPage++;\r\n        const start = (currentPage - 1) * pageSize;\r\n        const end = start + pageSize;\r\n        const moviesToShow = myLibrary.slice(start, end);\r\n        renderLibrary(moviesToShow);\r\n\r\n        // Eğer daha fazla film yoksa butonu gizle\r\n        if (end >= myLibrary.length) {\r\n            loadMoreBtn.style.display = 'none';\r\n        }\r\n    });\r\n    // Film silme butonuna tıklama olayı ekle\r\n    movieList.addEventListener('click', function (event) {\r\n        if (event.target.classList.contains('delete-btn')) {\r\n            const index = event.target.dataset.index;\r\n            myLibrary.splice(index, 1); // Seçilen filmi sil\r\n            localStorage.setItem('myLibrary', JSON.stringify(myLibrary));\r\n            renderLibrary(myLibrary.slice(0, pageSize)); // Listeyi güncelle\r\n        }\r\n    });\r\n}\r\n);\r\n\r\nfunction renderLibrary(movies) {\r\n    const movieList = document.getElementById('movie-grid');\r\n    movieList.innerHTML = ''; // Önceki filmleri temizle\r\n\r\n    movies.forEach((movie, index) => {\r\n        console.log(movie);\r\n        const li = document.createElement('li');\r\n        li.className = 'movies__list-item';\r\n        li.style.background = 'linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))';\r\n        li.style.backgroundImage = `url(https://image.tmdb.org/t/p/original${movie.poster_path})`;\r\n        li.style.backgroundSize = 'cover';\r\n        li.style.backgroundRepeat = 'no-repeat';\r\n        li.style.width = '395px';\r\n        li.style.height = '574px';\r\n        li.style.overflow = 'hidden';\r\n        li.style.borderRadius = '5px';\r\n        li.style.color = 'white';\r\n        li.style.position = 'relative';\r\n        li.style.cursor = 'pointer';\r\n        li.addEventListener('click', e => {\r\n            document.querySelector('.infoPopup').style.display = 'flex';\r\n        })\r\n        li.innerHTML = `\r\n                        <div class=\"movies__list-item-info\">\r\n                            <div class=\"movies__list-item-info-container\">\r\n                            <h3 class=\"movies__list-item-title\">${movie.title || movie.name}</h3>\r\n                            <p class=\"movies__list-item-description\">${movie.release_date}</p>\r\n                            </div>\r\n                            <div class=\"movies__list-item-rating\">\r\n                             ${Array.from({ length: 5 }, (_, index) =>\r\n            index < Math.round(movie.vote_average)\r\n                ? '<img src=\"./images/star.png\" alt=\"star\">'\r\n                : '<img src=\"./images/star-outline.png\" alt=\"empty star\">'\r\n        ).join('')}\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n        movieList.appendChild(li);\r\n    });\r\n}\r\n\r\n// Film türlerini isimlendiren fonksiyon\r\nfunction getGenreNames(genreIds) {\r\n    const genreMap = {\r\n        28: 'Action',\r\n        12: 'Adventure',\r\n        16: 'Animation',\r\n        35: 'Comedy',\r\n        80: 'Crime',\r\n        99: 'Documentary',\r\n        18: 'Drama',\r\n        10751: 'Family',\r\n        14: 'Fantasy',\r\n        36: 'History',\r\n        27: 'Horror',\r\n        10402: 'Music',\r\n        9648: 'Mystery',\r\n        10749: 'Romance',\r\n        878: 'Science Fiction',\r\n        10770: 'TV Movie',\r\n        53: 'Thriller',\r\n        10752: 'War',\r\n        37: 'Western'\r\n    };\r\n    if (!genreIds || !Array.isArray(genreIds)) return '';\r\n    const mappedGenres = genreIds.map(id => genreMap[id] || 'Unknown');\r\n    return mappedGenres.slice(0, 2).join(', '); // Maksimum 2 genre döndür\r\n}\r\n\r\nwindow.addEventListener('load', () => {\r\n    // Loader'ı gizle\r\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\r\n    setTimeout(() => {\r\n        hideLoader();\r\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\r\n});\r\n\r\n// edited by @yesimbozkurt","// @murselsen\r\nimport './js/navbar.js';\r\n// @AlperKale\r\nimport { showLoader, hideLoader } from './js/loader.js';\r\nimport './js/scroll-up.js';\r\n// @yesimbozkurt\r\nimport './js/my-library.js';\r\n// @sumeyyeterzi\r\nimport './js/infoPopup.js';\r\n// @erdem6161\r\nimport './js/footer.js';\r\nimport './js/members-modal.js';\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // Sayfanın tamamen yüklenmesini bekleyelim\r\n  // Bu sırada showLoader'ı çağırarak loader'ı gösteriyoruz\r\n  showLoader();\r\n  \r\n  // Sayfa tamamen yüklendiğinde loader'ı gizle\r\n  window.addEventListener('load', () => {\r\n    // Loader'ı gizle\r\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\r\n    setTimeout(() => {\r\n      hideLoader();\r\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\r\n  });\r\n});"],"names":["showLoader","myLibrary","genres","movieList","loadMoreBtn","numberOfMovies","currentPage","emptyLibrary","searchMovieBtn","renderLibrary","movie","genre","option","selectedGenre","filteredMovies","start","end","moviesToShow","event","index","movies","li","e","_","hideLoader"],"mappings":"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"}