{"version":3,"file":"myLibrary.js","sources":["../src/js/my-library.js","../src/myLibrary.js"],"sourcesContent":["// edited by @yesimbozkurt\n import { renderMovieInfoPopup } from './infoPopup.js';\n import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    showLoader();\n\n    // { \"backdrop_path\": \"/2Nti3gYAX513wvhp8IiLL6ZDyOm.jpg\", \"id\": 950387, \"title\": \"A Minecraft Movie\", \"original_title\": \"A Minecraft Movie\", \"overview\": \"Four misfits find themselves struggling with ordinary problems when they are suddenly pulled through a mysterious portal into the Overworld: a bizarre, cubic wonderland that thrives on imagination. To get back home, they'll have to master this world while embarking on a magical quest with an unexpected, expert crafter, Steve.\", \"poster_path\": \"/yFHHfHcUgGAxziP1C3lLt0q2T4s.jpg\", \"media_type\": \"movie\", \"adult\": false, \"original_language\": \"en\", \"genre_ids\": [10751, 35, 12, 14], \"popularity\": 992.0749, \"release_date\": \"2025-03-31\", \"video\": false, \"vote_average\": 6.086, \"vote_count\": 273 }\n\n    const myLibrary = JSON.parse(localStorage.getItem('myLibrary')) || [];\n\n    // mylibrary.html sayfasındaki elementler\n    const genres = document.getElementById('filters');\n    const movieList = document.querySelector('.library-content');\n    const loadMoreBtn = document.querySelector('.load-more-btn');\n    const genre = document.querySelector('#genre');\n\n    const numberOfMovies = 9; // Her seferinde gösterilecek film sayısı\n    let currentPage = 1; // Başlangıç sayfası\n\n    // library html sayfası (film yoksa görünecek sayfa)\n    const emptyLibrary = document.getElementById('empty-library');\n    const searchMovieBtn = document.getElementById('go-to-catalog-btn');\n\n\n    if (myLibrary.length === 0) {\n        // Film yoksa, sadece varsayılan ekranı göster\n        emptyLibrary.style.display = 'flex';\n        genres.style.display = 'none';\n        movieList.style.display = 'none';\n        loadMoreBtn.style.display = 'none';\n        searchMovieBtn.style.display = 'block'; // \"Go to Catalog\" butonunu göster\n        searchMovieBtn.addEventListener('click', function () {\n            window.location.href = 'index.html'; // Katalog sayfasına yönlendir\n        });\n        return;\n    } else {\n        // Film varsa, varsayılan ekranı gizle ve dropdown/load more'u göster\n        emptyLibrary.style.display = 'none';\n        searchMovieBtn.style.display = 'none'; // \"Go to Catalog\" butonunu gizle\n        genres.style.display = 'flex';\n        movieList.style.display = 'flex';\n        loadMoreBtn.style.display = 'flex';\n    }\n\n    renderLibrary(myLibrary.slice(0, numberOfMovies)); // İlk sayfayı göster\n    if (myLibrary.length > numberOfMovies) {\n        loadMoreBtn.style.display = 'block';\n    } else {\n        loadMoreBtn.style.display = 'none';\n    }\n\n    // Dropdown menüsünü oluştur\n    genre.addEventListener('change', e => {\n        const genreId = e.target.value;\n        const filteredMovies = genreId === 'all'\n            ? myLibrary.slice(0, currentPage * numberOfMovies)\n            : myLibrary.filter(movie => movie.genre_ids.includes(parseInt(genreId)));\n        if (filteredMovies.length === 0) {\n            movieList.innerHTML = ''; // Eğer filtrelenmiş film yoksa, listeyi temizle\n            loadMoreBtn.style.display = 'none';\n        }\n        else {\n            loadMoreBtn.style.display = 'block';\n            renderLibrary(filteredMovies);\n        }\n    })\n\n    // Load more butonuna tıklama olayı ekle\n    loadMoreBtn.addEventListener('click', function () {\n        currentPage++;\n        const newMovies = myLibrary.slice(0, currentPage * numberOfMovies);\n        renderLibrary(newMovies);\n\n        if (newMovies.length >= myLibrary.length) {\n            loadMoreBtn.style.display = 'none';\n        }\n\n    });\n});\n\nfunction renderLibrary(movies, append = false) {\n    // Eğer append true ise, mevcut filmleri koru ve yeni filmleri ekle\n\n    const movieList = document.querySelector(\".library-content\")\n\n    if (!append) {\n        movieList.innerHTML = ''; // Sadece append = false ise temizle\n    }\n    movieList.innerHTML = ''; // Önceki filmleri temizle\n\n    movies.forEach((movie, index) => {\n        const li = document.createElement('li');\n        li.className = 'movies__list-item';\n        li.style.background = 'linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))';\n        li.style.backgroundImage = `url(https://image.tmdb.org/t/p/original/${movie.poster_path})`;\n        li.style.backgroundSize = 'cover';\n        li.style.backgroundRepeat = 'no-repeat';\n        li.style.width = '395px';\n        li.style.height = '574px';\n        li.style.overflow = 'hidden';\n        li.style.borderRadius = '5px';\n        li.style.color = 'white';\n        li.style.position = 'relative';\n        li.style.cursor = 'pointer';\n        li.addEventListener('click', e => {\n            renderMovieInfoPopup(movie);\n        })\n\n        const stars = [\n            `<span class=\"star star-outline\"></span>`,\n            `<span class=\"star star-outline\"></span>`,\n            `<span class=\"star star-outline\"></span>`,\n            `<span class=\"star star-outline\"></span>`,\n            `<span class=\"star star-outline\"></span>`,\n          ];\n          for (let i = 0; i <= Math.round(movie.vote_average / 2); i++) {\n            stars[i] = `<span class=\"star star\"></span>`;\n          }\n\n        li.innerHTML = `\n                        <div class=\"movies__list-item-info\">\n                            <div class=\"movies__list-item-info-container\">\n                            <h3 class=\"movies__list-item-title\">${movie.title || movie.name}</h3>\n                            <p class=\"movies__list-item-description\">${movie.release_date}</p>\n                            </div>\n                            <div class=\"movies__list-item-rating\">\n                            ${stars.join('')}\n                            </div>\n                        </div>\n                    `;\n        movieList.appendChild(li);\n    });\n}\n\n// Film türlerini isimlendiren fonksiyon\nfunction getGenreNames(genreIds) {\n    const genreMap = {\n        28: 'Action',\n        12: 'Adventure',\n        16: 'Animation',\n        35: 'Comedy',\n        80: 'Crime',\n        99: 'Documentary',\n        18: 'Drama',\n        10751: 'Family',\n        14: 'Fantasy',\n        36: 'History',\n        27: 'Horror',\n        10402: 'Music',\n        9648: 'Mystery',\n        10749: 'Romance',\n        878: 'Science Fiction',\n        10770: 'TV Movie',\n        53: 'Thriller',\n        10752: 'War',\n        37: 'Western'\n    };\n    if (!genreIds || !Array.isArray(genreIds)) return '';\n    const mappedGenres = genreIds.map(id => genreMap[id] || 'Unknown');\n    return mappedGenres.slice(0, 2).join(', '); // Maksimum 2 genre döndür\n}\n\nwindow.addEventListener('load', () => {\n    // Loader'ı gizle\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\n    setTimeout(() => {\n        hideLoader();\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\n});\n\n// edited by @yesimbozkurt","// @murselsen\nimport './js/navbar.js';\n// @AlperKale\nimport { showLoader, hideLoader } from './js/loader.js';\nimport './js/scroll-up.js';\n// @sumeyyeterzi\nimport './js/infoPopup.js';\n// @yesimbozkurt\nimport './js/my-library.js';\n// @erdem6161\nimport './js/footer.js';\nimport './js/members-modal.js';\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Sayfanın tamamen yüklenmesini bekleyelim\n  // Bu sırada showLoader'ı çağırarak loader'ı gösteriyoruz\n  showLoader();\n  \n  // Sayfa tamamen yüklendiğinde loader'ı gizle\n  window.addEventListener('load', () => {\n    // Loader'ı gizle\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\n    setTimeout(() => {\n      hideLoader();\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\n  });\n});"],"names":["showLoader","myLibrary","genres","movieList","loadMoreBtn","genre","numberOfMovies","currentPage","emptyLibrary","searchMovieBtn","renderLibrary","e","genreId","filteredMovies","movie","newMovies","movies","append","index","li","renderMovieInfoPopup","stars","i","hideLoader"],"mappings":"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"}