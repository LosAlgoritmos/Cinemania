{"version":3,"file":"hero-CHS9ye11.js","sources":["../../src/js/errorModal.js","../../src/js/hero.js"],"sourcesContent":["/* Error Modules */\n\n// Cache DOM elements\nconst errorModal = document.querySelector('#errorModal');\nconst errorModalClose = document.querySelector('#errorModalClose');\n\n// Function to close the error modal\nconst closeErrorModal = () => {\n  if (errorModal) {\n    errorModal.style.display = 'none';\n  }\n};\n\n// Add event listeners if elements exist\nif (errorModal) {\n  errorModal.addEventListener('click', event => {\n    if (event.target === errorModal) {\n      closeErrorModal();\n    }\n  });\n}\n\nif (errorModalClose) {\n  errorModalClose.addEventListener('click', () => {\n    closeErrorModal();\n  });\n}\n\n// Close modal on 'Escape' key press\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closeErrorModal();\n  }\n});","import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\nimport { renderMovieInfoPopup } from './infoPopup.js';\nconst getDayTrends = async () => {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization:\n          'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\n      },\n    };\n\n    // Loader göster\n    showLoader();\n\n    fetch(\n      'https://api.themoviedb.org/3/trending/all/week?language=en-US',\n      options\n    )\n      .then(res => res.json())\n      .then(res => {\n        resolve(res);\n      })\n      .catch(err => {\n        console.error(err);\n        reject(err);\n      })\n      .finally(() => {\n        // Loader gizle\n        hideLoader();\n      });\n  });\n};\nconst getMovieVideos = async movieId => {\n  return new Promise((resolve, reject) => {\n    try {\n      // # watch-trailer\n      // # more-details\n      const getStartedButton = document.querySelector('#hero-get-started');\n      const watchTrailerButton = document.querySelector('#hero-watch-trailer');\n      const moreDetailsButton = document.querySelector('#more-details');\n      watchTrailerButton.style.display = 'none';\n      moreDetailsButton.style.display = 'none';\n      showLoader();\n      // url: 'https://api.themoviedb.org/3/movie/movie_id/videos\n      const options = {\n        method: 'GET',\n        headers: {\n          accept: 'application/json',\n          Authorization:\n            'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\n        },\n      };\n      console.log('Movie ID:', movieId);\n      fetch(\n        `https://api.themoviedb.org/3/movie/${movieId}/videos?language=en-US`,\n        options\n      )\n        .then(res => res.json())\n        .then(videoData => {\n          if (!videoData || !videoData.results) {\n            moreDetailsButton.style.display = 'none';\n            getStartedButton.addEventListener('click', () => {\n              document.querySelector('.error-modal').style.display = 'flex';\n            });\n            return;\n          }\n          getStartedButton.style.display = 'none';\n          watchTrailerButton.style.display = 'block';\n          moreDetailsButton.style.display = 'block';\n          moreDetailsButton.addEventListener('click', () => {\n            renderMovieInfoPopup(videoData)\n          })\n          watchTrailerButton.textContent = 'Watch Trailer';\n          const officialTrailer = videoData.results.find(\n            video => video.site === 'YouTube' && video.type === 'Trailer'\n          );\n          resolve(officialTrailer);\n          if (videoData.results.length > 0) {\n            videoData.results.forEach(videoItem => {\n              if (videoItem.type === 'Trailer') {\n                watchTrailerButton.textContent = 'Watch Trailer';\n                watchTrailerButton.addEventListener('click', () => {\n                  const trailerUrl = `https://www.youtube.com/watch?v=${videoItem.key}`;\n                  window.open(trailerUrl, '_blank');\n                });\n              }\n            });\n          }\n        })\n        .catch(err => console.error(err));\n    } catch (error) {\n      console.error('Error in getMovieVideos:', error);\n    } finally {\n      hideLoader();\n    }\n  });\n};\n\nconst heroRender = async () => {\n  try {\n    const stars = [\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n    ];\n\n    const heroTitle = document.querySelector('#hero__content-title');\n    const heroStars = document.querySelector('#hero__content-stars');\n    const heroInfoText = document.querySelector('#hero__content-info-text');\n    const heroButtonArea = document.querySelector('#hero-content-button-area');\n    const heroMoreDetails = document.querySelector('#more-details');\n    const heroPoster = document.querySelector(\n      '#hero__content-background-image'\n    );\n\n    // random number between 0 and 19\n    const randomNumber = Math.floor(Math.random() * 20);\n\n    showLoader(); // Veri yükleme başlıyor\n\n    getDayTrends()\n      .then(async res => {\n        const randomMovie = res.results[randomNumber];\n        // vote_average\n        const voteAverage = Math.round(randomMovie.vote_average / 2);\n        heroPoster.src = `https://image.tmdb.org/t/p/original/${randomMovie.backdrop_path}`;\n        heroTitle.textContent = randomMovie.original_name || randomMovie.original_title;\n        heroInfoText.textContent = randomMovie.overview;\n        for (let i = 0; i <= voteAverage; i++) {\n          stars[i] = `<span class=\"star star\"></span>`;\n        }\n        heroStars.innerHTML = stars.join('');\n        heroMoreDetails.addEventListener('click', () => {\n          renderMovieInfoPopup(randomMovie);\n        });\n        getMovieVideos(randomMovie.id);\n      })\n      .catch(err => {\n        console.error('Error fetching daily trends:', err);\n      })\n      .finally(() => {\n        hideLoader(); // Veri yükleme tamamlandı\n      });\n  } catch (error) {\n    console.error('Error in heroRender:', error);\n    hideLoader(); // Hata durumunda da loader'ı gizle\n  }\n};\nheroRender();"],"names":["errorModal","errorModalClose","closeErrorModal","event","getDayTrends","resolve","reject","options","showLoader","res","err","hideLoader","getMovieVideos","movieId","getStartedButton","watchTrailerButton","moreDetailsButton","videoData","renderMovieInfoPopup","officialTrailer","video","videoItem","trailerUrl","error","heroRender","stars","heroTitle","heroStars","heroInfoText","heroButtonArea","heroMoreDetails","heroPoster","randomNumber","randomMovie","voteAverage","i"],"mappings":"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"}