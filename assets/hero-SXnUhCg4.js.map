{"version":3,"file":"hero-SXnUhCg4.js","sources":["../../src/js/errorModal.js","../../src/js/hero.js"],"sourcesContent":["/* Error Modules */\r\n\r\n// Cache DOM elements\r\nconst errorModal = document.querySelector('#errorModal');\r\nconst errorModalClose = document.querySelector('#errorModalClose');\r\n\r\n// Function to close the error modal\r\nconst closeErrorModal = () => {\r\n  if (errorModal) {\r\n    errorModal.style.display = 'none';\r\n  }\r\n};\r\n\r\n// Add event listeners if elements exist\r\nif (errorModal) {\r\n  errorModal.addEventListener('click', event => {\r\n    if (event.target === errorModal) {\r\n      closeErrorModal();\r\n    }\r\n  });\r\n}\r\n\r\nif (errorModalClose) {\r\n  errorModalClose.addEventListener('click', () => {\r\n    closeErrorModal();\r\n  });\r\n}\r\n\r\n// Close modal on 'Escape' key press\r\ndocument.addEventListener('keydown', event => {\r\n  if (event.key === 'Escape') {\r\n    closeErrorModal();\r\n  }\r\n});","import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\r\nimport { renderMovieInfoPopup } from './infoPopup.js';\r\nconst getDayTrends = async () => {\r\n  return new Promise((resolve, reject) => {\r\n    const options = {\r\n      method: 'GET',\r\n      headers: {\r\n        accept: 'application/json',\r\n        Authorization:\r\n          'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\r\n      },\r\n    };\r\n\r\n    // Loader göster\r\n    showLoader();\r\n\r\n    fetch(\r\n      'https://api.themoviedb.org/3/trending/all/week?language=en-US',\r\n      options\r\n    )\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        resolve(res);\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        reject(err);\r\n      })\r\n      .finally(() => {\r\n        // Loader gizle\r\n        hideLoader();\r\n      });\r\n  });\r\n};\r\nconst getMovieVideos = async movieId => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      // # watch-trailer\r\n      // # more-details\r\n      const getStartedButton = document.querySelector('#hero-get-started');\r\n      const watchTrailerButton = document.querySelector('#hero-watch-trailer');\r\n      const moreDetailsButton = document.querySelector('#more-details');\r\n      watchTrailerButton.style.display = 'none';\r\n      moreDetailsButton.style.display = 'none';\r\n      showLoader();\r\n      // url: 'https://api.themoviedb.org/3/movie/movie_id/videos\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          accept: 'application/json',\r\n          Authorization:\r\n            'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\r\n        },\r\n      };\r\n      fetch(\r\n        `https://api.themoviedb.org/3/movie/${movieId}/videos?language=en-US`,\r\n        options\r\n      )\r\n        .then(res => res.json())\r\n        .then(videoData => {\r\n          if (!videoData || !videoData.results) {\r\n            moreDetailsButton.style.display = 'none';\r\n            getStartedButton.addEventListener('click', () => {\r\n              document.querySelector('.error-modal').style.display = 'flex';\r\n            });\r\n            return;\r\n          }\r\n          getStartedButton.style.display = 'none';\r\n          watchTrailerButton.style.display = 'block';\r\n          moreDetailsButton.style.display = 'block';\r\n          moreDetailsButton.addEventListener('click', () => {\r\n            renderMovieInfoPopup(videoData)\r\n          })\r\n          watchTrailerButton.textContent = 'Watch Trailer';\r\n          const officialTrailer = videoData.results.find(\r\n            video => video.site === 'YouTube' && video.type === 'Trailer'\r\n          );\r\n          resolve(officialTrailer);\r\n          if (videoData.results.length > 0) {\r\n            videoData.results.forEach(videoItem => {\r\n              if (videoItem.type === 'Trailer') {\r\n                watchTrailerButton.textContent = 'Watch Trailer';\r\n                watchTrailerButton.addEventListener('click', () => {\r\n                  const trailerUrl = `https://www.youtube.com/watch?v=${videoItem.key}`;\r\n                  window.open(trailerUrl, '_blank');\r\n                });\r\n              }\r\n            });\r\n          }\r\n        })\r\n        .catch(err => console.error(err));\r\n    } catch (error) {\r\n      console.error('Error in getMovieVideos:', error);\r\n    } finally {\r\n      hideLoader();\r\n    }\r\n  });\r\n};\r\n\r\nconst heroRender = async () => {\r\n  try {\r\n    const stars = [\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n    ];\r\n\r\n    const heroTitle = document.querySelector('#hero__content-title');\r\n    const heroStars = document.querySelector('#hero__content-stars');\r\n    const heroInfoText = document.querySelector('#hero__content-info-text');\r\n    const heroButtonArea = document.querySelector('#hero-content-button-area');\r\n    const heroMoreDetails = document.querySelector('#more-details');\r\n    const heroPoster = document.querySelector(\r\n      '#hero__content-background-image'\r\n    );\r\n\r\n    // random number between 0 and 19\r\n    const randomNumber = Math.floor(Math.random() * 20);\r\n\r\n    showLoader(); // Veri yükleme başlıyor\r\n\r\n    getDayTrends()\r\n      .then(async res => {\r\n        const randomMovie = res.results[randomNumber];\r\n        // vote_average\r\n        const voteAverage = Math.round(randomMovie.vote_average / 2);\r\n        heroPoster.src = `https://image.tmdb.org/t/p/original/${randomMovie.backdrop_path}`;\r\n        heroTitle.textContent = randomMovie.original_name || randomMovie.original_title;\r\n        heroInfoText.textContent = randomMovie.overview;\r\n        for (let i = 0; i <= voteAverage; i++) {\r\n          stars[i] = `<span class=\"star star\"></span>`;\r\n        }\r\n        heroStars.innerHTML = stars.join('');\r\n        heroMoreDetails.addEventListener('click', () => {\r\n          renderMovieInfoPopup(randomMovie);\r\n        });\r\n        getMovieVideos(randomMovie.id);\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching daily trends:', err);\r\n      })\r\n      .finally(() => {\r\n        hideLoader(); // Veri yükleme tamamlandı\r\n      });\r\n  } catch (error) {\r\n    console.error('Error in heroRender:', error);\r\n    hideLoader(); // Hata durumunda da loader'ı gizle\r\n  }\r\n};\r\nheroRender();"],"names":["errorModal","errorModalClose","closeErrorModal","event","getDayTrends","resolve","reject","options","showLoader","res","err","hideLoader","getMovieVideos","movieId","getStartedButton","watchTrailerButton","moreDetailsButton","videoData","renderMovieInfoPopup","officialTrailer","video","videoItem","trailerUrl","error","heroRender","stars","heroTitle","heroStars","heroInfoText","heroButtonArea","heroMoreDetails","heroPoster","randomNumber","randomMovie","voteAverage","i"],"mappings":"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"}