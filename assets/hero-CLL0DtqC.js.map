{"version":3,"file":"hero-CLL0DtqC.js","sources":["../../src/js/errorModal.js","../../src/js/hero.js"],"sourcesContent":["/* Error Modules */\n\n// Cache DOM elements\nconst errorModal = document.querySelector('#errorModal');\nconst errorModalClose = document.querySelector('#errorModalClose');\n\n// Function to close the error modal\nconst closeErrorModal = () => {\n  if (errorModal) {\n    errorModal.style.display = 'none';\n  }\n};\n\n// Add event listeners if elements exist\nif (errorModal) {\n  errorModal.addEventListener('click', event => {\n    if (event.target === errorModal) {\n      closeErrorModal();\n    }\n  });\n}\n\nif (errorModalClose) {\n  errorModalClose.addEventListener('click', () => {\n    closeErrorModal();\n  });\n}\n\n// Close modal on 'Escape' key press\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closeErrorModal();\n  }\n});","import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\nimport { renderMovieInfoPopup } from './infoPopup.js';\nconst getDayTrends = async () => {\n  return new Promise((resolve, reject) => {\n    const options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization:\n          'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\n      },\n    };\n\n    // Loader göster\n    showLoader();\n\n    fetch(\n      'https://api.themoviedb.org/3/trending/all/week?language=en-US',\n      options\n    )\n      .then(res => res.json())\n      .then(res => {\n        resolve(res);\n      })\n      .catch(err => {\n        console.error(err);\n        reject(err);\n      })\n      .finally(() => {\n        // Loader gizle\n        hideLoader();\n      });\n  });\n};\nconst getMovieVideos = async movieId => {\n  return new Promise((resolve, reject) => {\n    try {\n\n      showLoader();\n      // url: 'https://api.themoviedb.org/3/movie/movie_id/videos\n      const options = {\n        method: 'GET',\n        headers: {\n          accept: 'application/json',\n          Authorization:\n            'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\n        },\n      };\n      fetch(\n        `https://api.themoviedb.org/3/movie/${movieId}/videos?language=en-US`,\n        options\n      )\n        .then(res => res.json())\n        .then(videoData => {\n\n          resolve(videoData);\n\n        })\n        .catch(err => {\n          console.error(err);\n          reject(err);\n        });\n    } catch (error) {\n      console.error('Error in getMovieVideos:', error);\n    } finally {\n      hideLoader();\n    }\n  });\n};\n\nconst heroRender = async () => {\n  try {\n    const stars = [\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n      `<span class=\"star star-outline\"></span>`,\n    ];\n\n    const heroTitle = document.querySelector('#hero__content-title');\n    const heroStars = document.querySelector('#hero__content-stars');\n    const heroInfoText = document.querySelector('#hero__content-info-text');\n    const heroButtonArea = document.querySelector('#hero-content-button-area');\n    const heroGetStartedButton = document.querySelector('#hero-get-started');\n    const heroWatchTrailerButton = document.querySelector('#hero-watch-trailer');\n    const heroMoreDetails = document.querySelector('#more-details');\n\n    const heroPoster = document.querySelector(\n      '#hero__content-background-image'\n    );\n\n    // random number between 0 and 19\n    const randomNumber = Math.floor(Math.random() * 20);\n\n    showLoader(); // Veri yükleme başlıyor\n\n    getDayTrends()\n      .then(async res => {\n        const randomMovie = res.results[randomNumber];\n        if (randomMovie) {\n          heroMoreDetails.style.display = 'block';\n          heroGetStartedButton.style.display = 'none';\n        }\n        // vote_average\n        const voteAverage = Math.round(randomMovie.vote_average / 2);\n        heroPoster.src = `https://image.tmdb.org/t/p/original/${randomMovie.backdrop_path}`;\n        heroTitle.textContent = randomMovie.original_name || randomMovie.original_title || randomMovie.title;\n        heroInfoText.textContent = randomMovie.overview;\n        for (let i = 0; i <= voteAverage; i++) {\n          stars[i] = `<span class=\"star star\"></span>`;\n        }\n        heroStars.innerHTML = stars.join('');\n        heroMoreDetails.addEventListener('click', () => {\n          renderMovieInfoPopup(randomMovie);\n        });\n        heroWatchTrailerButton.addEventListener('click', () => {\n          getMovieVideos(randomMovie.id).then(videoData => {\n            if (videoData.results.length === 0) {\n              document.querySelector('#errorModal').style.display = 'flex';\n              return;\n            } else {\n              let vData = videoData.results.find(\n                video => video.site === 'YouTube' && video.type === 'Trailer'\n              );\n\n              window.open(`https://www.youtube.com/watch?v=${vData.key}`, '_blank');\n            }\n          })\n            .catch(err => {\n              console.error('Error fetching video data:', err);\n            });\n        });\n        // getMovieVideos(randomMovie.id);\n      })\n      .catch(err => {\n        console.error('Error fetching daily trends:', err);\n      })\n      .finally(() => {\n        hideLoader(); // Veri yükleme tamamlandı\n      });\n  } catch (error) {\n    console.error('Error in heroRender:', error);\n    hideLoader(); // Hata durumunda da loader'ı gizle\n  }\n};\nheroRender();"],"names":["errorModal","errorModalClose","closeErrorModal","event","getDayTrends","resolve","reject","options","showLoader","res","err","hideLoader","getMovieVideos","movieId","videoData","error","heroRender","stars","heroTitle","heroStars","heroInfoText","heroButtonArea","heroGetStartedButton","heroWatchTrailerButton","heroMoreDetails","heroPoster","randomNumber","randomMovie","voteAverage","i","renderMovieInfoPopup","vData","video"],"mappings":"8DAGA,MAAMA,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAkB,SAAS,cAAc,kBAAkB,EAG3DC,EAAkB,IAAM,CACxBF,IACFA,EAAW,MAAM,QAAU,OAE/B,EAGIA,GACFA,EAAW,iBAAiB,QAASG,GAAS,CACxCA,EAAM,SAAWH,GACnBE,EAAiB,CAEvB,CAAG,EAGCD,GACFA,EAAgB,iBAAiB,QAAS,IAAM,CAC9CC,EAAiB,CACrB,CAAG,EAIH,SAAS,iBAAiB,UAAWC,GAAS,CACxCA,EAAM,MAAQ,UAChBD,EAAiB,CAErB,CAAC,EC/BD,MAAME,EAAe,SACZ,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,MAAMC,EAAU,CACd,OAAQ,MACR,QAAS,CACP,OAAQ,mBACR,cACE,wPACH,CACF,EAGDC,EAAY,EAEZ,MACE,gEACAD,CACN,EACO,KAAKE,GAAOA,EAAI,KAAM,CAAA,EACtB,KAAKA,GAAO,CACXJ,EAAQI,CAAG,CACZ,CAAA,EACA,MAAMC,GAAO,CACZ,QAAQ,MAAMA,CAAG,EACjBJ,EAAOI,CAAG,CACX,CAAA,EACA,QAAQ,IAAM,CAEbC,EAAY,CACpB,CAAO,CACP,CAAG,EAEGC,EAAiB,MAAMC,GACpB,IAAI,QAAQ,CAACR,EAASC,IAAW,CACtC,GAAI,CAEFE,EAAY,EAEZ,MAAMD,EAAU,CACd,OAAQ,MACR,QAAS,CACP,OAAQ,mBACR,cACE,wPACH,CACF,EACD,MACE,sCAAsCM,CAAO,yBAC7CN,CACR,EACS,KAAKE,GAAOA,EAAI,KAAM,CAAA,EACtB,KAAKK,GAAa,CAEjBT,EAAQS,CAAS,CAElB,CAAA,EACA,MAAMJ,GAAO,CACZ,QAAQ,MAAMA,CAAG,EACjBJ,EAAOI,CAAG,CACpB,CAAS,CACJ,OAAQK,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACrD,QAAc,CACRJ,EAAY,CAClB,CACA,CAAG,EAGGK,EAAa,SAAY,CAC7B,GAAI,CACF,MAAMC,EAAQ,CACZ,0CACA,0CACA,0CACA,0CACA,yCACD,EAEKC,EAAY,SAAS,cAAc,sBAAsB,EACzDC,EAAY,SAAS,cAAc,sBAAsB,EACzDC,EAAe,SAAS,cAAc,0BAA0B,EAChEC,EAAiB,SAAS,cAAc,2BAA2B,EACnEC,EAAuB,SAAS,cAAc,mBAAmB,EACjEC,EAAyB,SAAS,cAAc,qBAAqB,EACrEC,EAAkB,SAAS,cAAc,eAAe,EAExDC,EAAa,SAAS,cAC1B,iCACD,EAGKC,EAAe,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAElDlB,IAEAJ,EAAY,EACT,KAAK,MAAMK,GAAO,CACjB,MAAMkB,EAAclB,EAAI,QAAQiB,CAAY,EACxCC,IACFH,EAAgB,MAAM,QAAU,QAChCF,EAAqB,MAAM,QAAU,QAGvC,MAAMM,EAAc,KAAK,MAAMD,EAAY,aAAe,CAAC,EAC3DF,EAAW,IAAM,uCAAuCE,EAAY,aAAa,GACjFT,EAAU,YAAcS,EAAY,eAAiBA,EAAY,gBAAkBA,EAAY,MAC/FP,EAAa,YAAcO,EAAY,SACvC,QAASE,EAAI,EAAGA,GAAKD,EAAaC,IAChCZ,EAAMY,CAAC,EAAI,kCAEbV,EAAU,UAAYF,EAAM,KAAK,EAAE,EACnCO,EAAgB,iBAAiB,QAAS,IAAM,CAC9CM,EAAqBH,CAAW,CAC1C,CAAS,EACDJ,EAAuB,iBAAiB,QAAS,IAAM,CACrDX,EAAee,EAAY,EAAE,EAAE,KAAKb,GAAa,CAC/C,GAAIA,EAAU,QAAQ,SAAW,EAAG,CAClC,SAAS,cAAc,aAAa,EAAE,MAAM,QAAU,OACtD,MACd,KAAmB,CACL,IAAIiB,EAAQjB,EAAU,QAAQ,KAC5BkB,GAASA,EAAM,OAAS,WAAaA,EAAM,OAAS,SACrD,EAED,OAAO,KAAK,mCAAmCD,EAAM,GAAG,GAAI,QAAQ,CAClF,CACW,CAAA,EACE,MAAMrB,GAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAG,CAC7D,CAAa,CACb,CAAS,CAEF,CAAA,EACA,MAAMA,GAAO,CACZ,QAAQ,MAAM,+BAAgCA,CAAG,CAClD,CAAA,EACA,QAAQ,IAAM,CACbC,GACR,CAAO,CACJ,OAAQI,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CJ,GACJ,CACA,EACAK,EAAY"}