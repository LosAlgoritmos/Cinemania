{"version":3,"file":"hero-Cz4UtpxF.js","sources":["../../src/js/hero.js"],"sourcesContent":["import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\r\n\r\nconst getDayTrends = async () => {\r\n  return new Promise((resolve, reject) => {\r\n    const options = {\r\n      method: 'GET',\r\n      headers: {\r\n        accept: 'application/json',\r\n        Authorization:\r\n          'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\r\n      },\r\n    };\r\n\r\n    // Loader göster\r\n    showLoader();\r\n\r\n    fetch(\r\n      'https://api.themoviedb.org/3/trending/all/week?language=en-US',\r\n      options\r\n    )\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        resolve(res);\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        reject(err);\r\n      })\r\n      .finally(() => {\r\n        // Loader gizle\r\n        hideLoader();\r\n      });\r\n  });\r\n};\r\nconst getMovieVideos = async movieId => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      // # watch-trailer\r\n      // # more-details\r\n      const getStartedButton = document.querySelector('#hero-get-started');\r\n      const watchTrailerButton = document.querySelector('#hero-watch-trailer');\r\n      const moreDetailsButton = document.querySelector('#more-details');\r\n      watchTrailerButton.style.display = 'none';\r\n      moreDetailsButton.style.display = 'none';\r\n      showLoader();\r\n      // url: 'https://api.themoviedb.org/3/movie/movie_id/videos\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          accept: 'application/json',\r\n          Authorization:\r\n            'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\r\n        },\r\n      };\r\n      console.log('Movie ID:', movieId);\r\n      fetch(\r\n        `https://api.themoviedb.org/3/movie/${movieId}/videos?language=en-US`,\r\n        options\r\n      )\r\n        .then(res => res.json())\r\n        .then(videoData => {\r\n          if (!videoData || !videoData.results) {\r\n            moreDetailsButton.style.display = 'none';\r\n            getStartedButton.addEventListener('click', () => {\r\n              document.querySelector('.error-modal').style.display = 'flex';\r\n            });\r\n            return;\r\n          }\r\n          getStartedButton.style.display = 'none';\r\n          watchTrailerButton.style.display = 'block';\r\n          moreDetailsButton.style.display = 'block';\r\n          watchTrailerButton.textContent = 'Watch Trailer';\r\n          const officialTrailer = videoData.results.find(\r\n            video => video.site === 'YouTube' && video.type === 'Trailer'\r\n          );\r\n          console.log('Official Trailer Data:', officialTrailer);\r\n          resolve(officialTrailer);\r\n          if (videoData.results.length > 0) {\r\n            videoData.results.forEach(videoItem => {\r\n              if (videoItem.type === 'Trailer') {\r\n                watchTrailerButton.textContent = 'Watch Trailer';\r\n                watchTrailerButton.addEventListener('click', () => {\r\n                  const trailerUrl = `https://www.youtube.com/watch?v=${videoItem.key}`;\r\n                  window.open(trailerUrl, '_blank');\r\n                });\r\n              }\r\n            });\r\n          }\r\n        })\r\n        .catch(err => console.error(err));\r\n    } catch (error) {\r\n      console.error('Error in getMovieVideos:', error);\r\n    } finally {\r\n      hideLoader();\r\n    }\r\n  });\r\n};\r\n\r\nconst heroRender = async () => {\r\n  try {\r\n    const stars = [\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n    ];\r\n\r\n    const heroTitle = document.querySelector('#hero__content-title');\r\n    const heroStars = document.querySelector('#hero__content-stars');\r\n    const heroInfoText = document.querySelector('#hero__content-info-text');\r\n    const heroButtonArea = document.querySelector('#hero-content-button-area');\r\n    const heroPoster = document.querySelector(\r\n      '#hero__content-background-image'\r\n    );\r\n\r\n    // random number between 0 and 19\r\n    const randomNumber = Math.floor(Math.random() * 20);\r\n\r\n    showLoader(); // Veri yükleme başlıyor\r\n\r\n    getDayTrends()\r\n      .then(async res => {\r\n        const randomMovie = res.results[randomNumber];\r\n        // vote_average\r\n        const voteAverage = Math.round(randomMovie.vote_average / 2);\r\n\r\n        heroPoster.src = `https://image.tmdb.org/t/p/original/${randomMovie.backdrop_path}`;\r\n\r\n        heroTitle.textContent =\r\n          randomMovie.original_name || randomMovie.original_title;\r\n        heroInfoText.textContent = randomMovie.overview;\r\n        for (let i = 0; i <= voteAverage; i++) {\r\n          stars[i] = `<span class=\"star star\"></span>`;\r\n        }\r\n        heroStars.innerHTML = stars.join('');\r\n\r\n        getMovieVideos(randomMovie.id);\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching daily trends:', err);\r\n      })\r\n      .finally(() => {\r\n        hideLoader(); // Veri yükleme tamamlandı\r\n      });\r\n  } catch (error) {\r\n    console.error('Error in heroRender:', error);\r\n    hideLoader(); // Hata durumunda da loader'ı gizle\r\n  }\r\n};\r\n\r\nheroRender();\r\n\r\n// getMovieVideos fonksiyonu için de loader kullanımı\r\n// const getMovieVideos = async (movieId) => {\r\n//   try {\r\n//     showLoader();\r\n//     const options = {\r\n//       method: 'GET',\r\n//       headers: {\r\n//         accept: 'application/json',\r\n//         Authorization:\r\n//           'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\r\n//       },\r\n//     };\r\n\r\n//     const response = await fetch(`https://api.themoviedb.org/3/movie/${movieId}/videos?language=en-US`, options);\r\n//     const data = await response.json();\r\n//     console.log('Movie Videos:', data);\r\n//     // Video işleme kodları buraya\r\n//   } catch (error) {\r\n//     console.error('Error fetching movie videos:', error);\r\n//   } finally {\r\n//     hideLoader();\r\n//   }\r\n// };\r\n"],"names":["getDayTrends","resolve","reject","options","showLoader","res","err","hideLoader","getMovieVideos","movieId","getStartedButton","watchTrailerButton","moreDetailsButton","videoData","officialTrailer","video","videoItem","trailerUrl","error","heroRender","stars","heroTitle","heroStars","heroInfoText","heroButtonArea","heroPoster","randomNumber","randomMovie","voteAverage"],"mappings":"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"}