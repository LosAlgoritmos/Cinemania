{"version":3,"file":"hero-DpNbW6zs.js","sources":["../../src/js/errorModal.js","../../src/js/hero.js"],"sourcesContent":["/* Error Modules */\r\n\r\n// Cache DOM elements\r\nconst errorModal = document.querySelector('#errorModal');\r\nconst errorModalClose = document.querySelector('#errorModalClose');\r\n\r\n// Function to close the error modal\r\nconst closeErrorModal = () => {\r\n  if (errorModal) {\r\n    errorModal.style.display = 'none';\r\n  }\r\n};\r\n\r\n// Add event listeners if elements exist\r\nif (errorModal) {\r\n  errorModal.addEventListener('click', event => {\r\n    if (event.target === errorModal) {\r\n      closeErrorModal();\r\n    }\r\n  });\r\n}\r\n\r\nif (errorModalClose) {\r\n  errorModalClose.addEventListener('click', () => {\r\n    closeErrorModal();\r\n  });\r\n}\r\n\r\n// Close modal on 'Escape' key press\r\ndocument.addEventListener('keydown', event => {\r\n  if (event.key === 'Escape') {\r\n    closeErrorModal();\r\n  }\r\n});","import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\r\nimport { renderMovieInfoPopup } from './infoPopup.js';\r\nconst getDayTrends = async () => {\r\n  return new Promise((resolve, reject) => {\r\n    const options = {\r\n      method: 'GET',\r\n      headers: {\r\n        accept: 'application/json',\r\n        Authorization:\r\n          'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\r\n      },\r\n    };\r\n\r\n    // Loader göster\r\n    showLoader();\r\n\r\n    fetch(\r\n      'https://api.themoviedb.org/3/trending/all/week?language=en-US',\r\n      options\r\n    )\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        resolve(res);\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        reject(err);\r\n      })\r\n      .finally(() => {\r\n        // Loader gizle\r\n        hideLoader();\r\n      });\r\n  });\r\n};\r\nconst getMovieVideos = async movieId => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n\r\n      showLoader();\r\n      // url: 'https://api.themoviedb.org/3/movie/movie_id/videos\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          accept: 'application/json',\r\n          Authorization:\r\n            'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlMTU5ZDczMTAzOWRjYWNhYzc1ZjBkNmEyZDUzNzFjYSIsIm5iZiI6MTc0MzIwMzMwOC4zMTQsInN1YiI6IjY3ZTcyYmVjMGU4ZWU2NzgxNTY3YTQ4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H1VcIsy5PEjzy4uHm47ss9XozIyh5LIka9hEmPAOO3k',\r\n        },\r\n      };\r\n      fetch(\r\n        `https://api.themoviedb.org/3/movie/${movieId}/videos?language=en-US`,\r\n        options\r\n      )\r\n        .then(res => res.json())\r\n        .then(videoData => {\r\n\r\n          resolve(videoData);\r\n\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          reject(err);\r\n        });\r\n    } catch (error) {\r\n      console.error('Error in getMovieVideos:', error);\r\n    } finally {\r\n      hideLoader();\r\n    }\r\n  });\r\n};\r\n\r\nconst heroRender = async () => {\r\n  try {\r\n    const stars = [\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n      `<span class=\"star star-outline\"></span>`,\r\n    ];\r\n\r\n    const heroTitle = document.querySelector('#hero__content-title');\r\n    const heroStars = document.querySelector('#hero__content-stars');\r\n    const heroInfoText = document.querySelector('#hero__content-info-text');\r\n    const heroButtonArea = document.querySelector('#hero-content-button-area');\r\n    const heroGetStartedButton = document.querySelector('#hero-get-started');\r\n    const heroWatchTrailerButton = document.querySelector('#hero-watch-trailer');\r\n    const heroMoreDetails = document.querySelector('#more-details');\r\n\r\n    const heroPoster = document.querySelector(\r\n      '#hero__content-background-image'\r\n    );\r\n\r\n    // random number between 0 and 19\r\n    const randomNumber = Math.floor(Math.random() * 20);\r\n\r\n    showLoader(); // Veri yükleme başlıyor\r\n\r\n    getDayTrends()\r\n      .then(async res => {\r\n        const randomMovie = res.results[randomNumber];\r\n        if (randomMovie) {\r\n          heroMoreDetails.style.display = 'block';\r\n          heroGetStartedButton.style.display = 'none';\r\n        }\r\n        // vote_average\r\n        const voteAverage = Math.round(randomMovie.vote_average / 2);\r\n        heroPoster.src = `https://image.tmdb.org/t/p/original/${randomMovie.backdrop_path}`;\r\n        heroTitle.textContent = randomMovie.original_name || randomMovie.original_title || randomMovie.title;\r\n        heroInfoText.textContent = randomMovie.overview;\r\n        for (let i = 0; i <= voteAverage; i++) {\r\n          stars[i] = `<span class=\"star star\"></span>`;\r\n        }\r\n        heroStars.innerHTML = stars.join('');\r\n        heroMoreDetails.addEventListener('click', () => {\r\n          renderMovieInfoPopup(randomMovie);\r\n        });\r\n        heroWatchTrailerButton.addEventListener('click', () => {\r\n          getMovieVideos(randomMovie.id).then(videoData => {\r\n            if (videoData.results.length === 0) {\r\n              document.querySelector('#errorModal').style.display = 'flex';\r\n              return;\r\n            } else {\r\n              let vData = videoData.results.find(\r\n                video => video.site === 'YouTube' && video.type === 'Trailer'\r\n              );\r\n\r\n              window.open(`https://www.youtube.com/watch?v=${vData.key}`, '_blank');\r\n            }\r\n          })\r\n            .catch(err => {\r\n              console.error('Error fetching video data:', err);\r\n            });\r\n        });\r\n        // getMovieVideos(randomMovie.id);\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching daily trends:', err);\r\n      })\r\n      .finally(() => {\r\n        hideLoader(); // Veri yükleme tamamlandı\r\n      });\r\n  } catch (error) {\r\n    console.error('Error in heroRender:', error);\r\n    hideLoader(); // Hata durumunda da loader'ı gizle\r\n  }\r\n};\r\nheroRender();"],"names":["errorModal","errorModalClose","closeErrorModal","event","getDayTrends","resolve","reject","options","showLoader","res","err","hideLoader","getMovieVideos","movieId","videoData","error","heroRender","stars","heroTitle","heroStars","heroInfoText","heroButtonArea","heroGetStartedButton","heroWatchTrailerButton","heroMoreDetails","heroPoster","randomNumber","randomMovie","voteAverage","i","renderMovieInfoPopup","vData","video"],"mappings":"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"}