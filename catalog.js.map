{"version":3,"file":"catalog.js","sources":["../src/js/movies.js","../src/catalog.js"],"sourcesContent":["import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\r\nimport { renderMovieInfoPopup } from './infoPopup.js';\r\nconst moviesList = document.querySelector('.movies__list-items');\r\nconst paginationContainer = document.querySelector('.pagination-container');\r\n\r\nlet currentPage = 1;\r\nlet totalPages = 0;\r\n\r\nlet searchQuery = '';\r\nlet searchTimeout;\r\n\r\nconst searchInput = document.querySelector('.movies__search');\r\nconst searchbtn = document.querySelector('#catalog-search-btn');\r\nconst clearSearchBtn = document.querySelector('.clear-search');\r\n\r\nsearchbtn.addEventListener('click', () => {\r\n  const alert = document.createElement('div');\r\n  alert.textContent =\r\n    'BOSU BOSUNA O TUSA BASMA ARTIK ZATEN INPUT YERINE YAZINCA ARIYOR!';\r\n  alert.style.cssText = `\r\n        position: fixed;\r\n        top: 20px;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        background: rgba(0,0,0,0.8);\r\n        color: white;\r\n        padding: 10px 20px;\r\n        border-radius: 5px;\r\n        z-index: 1000;\r\n        opacity: 0;\r\n        transition: opacity 0.3s ease;\r\n        font-size: 2.6rem;\r\n    `;\r\n  document.body.appendChild(alert);\r\n\r\n  setTimeout(() => {\r\n    alert.style.opacity = '1';\r\n  }, 0);\r\n\r\n});\r\n\r\n\r\n  searchInput.addEventListener('input', e => {\r\n    searchQuery = e.target.value.trim();\r\n\r\n    // Temizleme butonunun görünürlüğünü kontrol et\r\n    if (searchQuery) {\r\n      clearSearchBtn.classList.add('visible');\r\n    } else {\r\n      clearSearchBtn.classList.remove('visible');\r\n    }\r\n\r\n    clearTimeout(searchTimeout);\r\n\r\n    searchTimeout = setTimeout(() => {\r\n      currentPage = 1;\r\n      getMovies(currentPage);\r\n    }, 500);\r\n  });\r\n\r\n\r\n  // Temizleme butonuna tıklama olayı ekle\r\n  clearSearchBtn.addEventListener('click', () => {\r\n    searchInput.value = '';\r\n    searchQuery = '';\r\n    clearSearchBtn.classList.remove('visible');\r\n    currentPage = 1;\r\n    getMovies(currentPage);\r\n  });\r\n\r\n  async function getMovies(page = 1) {\r\n    showLoader();\r\n    try {\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          accept: 'application/json',\r\n          Authorization:\r\n            'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0OGFlMTQ1ZTQyYzc4MDQ5YjI3Y2MwY2NhZWU1NGE3NSIsIm5iZiI6MTc0MzYzNzA0MC4yMzksInN1YiI6IjY3ZWRjYTMwMDM1NDBjZjhlNTYyODgwNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.tuTxlFoUnsTSw7K5siU94XHqec4Jgt-IVZeRxvzIv2Y',\r\n        },\r\n      };\r\n\r\n      // Arama sorgusu varsa search endpoint'ini kullan, yoksa trending endpoint'ini kullan\r\n      const endpoint = searchQuery\r\n        ? `https://api.themoviedb.org/3/search/movie?query=${encodeURIComponent(\r\n            searchQuery\r\n          )}&language=en-US&page=${page}`\r\n        : `https://api.themoviedb.org/3/trending/all/day?language=en-US&page=${page}`;\r\n\r\n      const response = await fetch(endpoint, options);\r\n      const data = await response.json();\r\n\r\n      totalPages = data.total_pages;\r\n\r\n      moviesList.innerHTML = '';\r\n\r\n      // Sonuç yoksa mesaj göster\r\n      if (data.results.length === 0) {\r\n        moviesList.innerHTML = `\r\n        <li class=\"no-results\">\r\n          <h2>OOPS...</h2>\r\n          <p>We are very sorry!</p>\r\n          <p>We don't have any results matching your search.</p>\r\n        </li>\r\n      `;\r\n        paginationContainer.innerHTML = '';\r\n        return;\r\n      }\r\n\r\n      // Render movies\r\n      data.results.forEach(movie => {\r\n        const li = document.createElement('li');\r\n        li.className = 'movies__list-item';\r\n\r\n        // Set up background with gradient overlay and poster image\r\n        li.style.background =\r\n          'linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))';\r\n        li.style.backgroundImage = `url(https://image.tmdb.org/t/p/original${movie.poster_path})`;\r\n\r\n        // Note: No inline dimensions - CSS handles these now\r\n\r\n        li.innerHTML = `\r\n        <div class=\"movies__list-item-info\">\r\n          <div class=\"movies__list-item-info-container\">\r\n            <h3 class=\"movies__list-item-title\">${\r\n              movie.title || movie.name\r\n            }</h3>\r\n            <p class=\"movies__list-item-description\">${\r\n              movie.release_date || movie.first_air_date || ''\r\n            }</p>\r\n          </div>\r\n          <div class=\"movies__list-item-rating\">\r\n            ${Array.from({ length: 5 }, (_, index) =>\r\n              index < Math.round(movie.vote_average / 2)\r\n                ? '<img src=\"./images/star.png\" alt=\"star\">'\r\n                : '<img src=\"./images/star-outline.png\" alt=\"empty star\">'\r\n            ).join('')}\r\n          </div>\r\n        </div>\r\n      `;\r\n      li.addEventListener('click', () => {\r\n        renderMovieInfoPopup(movie);\r\n      });\r\n\r\n        moviesList.appendChild(li);\r\n      });\r\n\r\n      renderPagination();\r\n    } catch (err) {\r\n      console.error('Error fetching movies:', err);\r\n      moviesList.innerHTML =\r\n        '<li class=\"error-message\">Filmler yüklenirken bir hata oluştu.</li>';\r\n    } finally {\r\n      hideLoader();\r\n    }\r\n  }\r\n\r\n  function renderPagination() {\r\n    paginationContainer.innerHTML = '';\r\n    const paginationWrapper = document.createElement('div');\r\n    paginationWrapper.className = 'pagination-wrapper';\r\n\r\n    const prevButton = document.createElement('button');\r\n    prevButton.innerHTML = '<';\r\n    prevButton.className = 'pagination-button prev';\r\n    prevButton.disabled = currentPage === 1;\r\n    prevButton.addEventListener('click', () => {\r\n      if (currentPage > 1) {\r\n        currentPage--;\r\n        getMovies(currentPage);\r\n      }\r\n    });\r\n\r\n    const pageButtons = document.createElement('div');\r\n    pageButtons.className = 'pagination-pages';\r\n\r\n    let startPage = Math.max(1, currentPage - 1);\r\n    let endPage = Math.min(totalPages, startPage + 2);\r\n\r\n    if (endPage === totalPages) {\r\n      startPage = Math.max(1, endPage - 2);\r\n    }\r\n\r\n    if (startPage > 1) {\r\n      const firstPageBtn = createPageButton(1);\r\n      pageButtons.appendChild(firstPageBtn);\r\n\r\n      if (startPage > 2) {\r\n        const ellipsis = document.createElement('span');\r\n        ellipsis.textContent = '...';\r\n        ellipsis.className = 'pagination-ellipsis';\r\n        pageButtons.appendChild(ellipsis);\r\n      }\r\n    }\r\n\r\n    for (let i = startPage; i <= endPage; i++) {\r\n      const pageBtn = createPageButton(i);\r\n      pageButtons.appendChild(pageBtn);\r\n    }\r\n\r\n    if (endPage < totalPages) {\r\n      if (endPage < totalPages - 1) {\r\n        const ellipsis = document.createElement('span');\r\n        ellipsis.textContent = '...';\r\n        ellipsis.className = 'pagination-ellipsis';\r\n        pageButtons.appendChild(ellipsis);\r\n      }\r\n\r\n      const lastPageBtn = createPageButton(totalPages);\r\n      pageButtons.appendChild(lastPageBtn);\r\n    }\r\n\r\n    const nextButton = document.createElement('button');\r\n    nextButton.innerHTML = '>';\r\n    nextButton.className = 'pagination-button next';\r\n    nextButton.disabled = currentPage === totalPages;\r\n    nextButton.addEventListener('click', () => {\r\n      if (currentPage < totalPages) {\r\n        currentPage++;\r\n        getMovies(currentPage);\r\n      }\r\n    });\r\n\r\n    paginationWrapper.appendChild(prevButton);\r\n    paginationWrapper.appendChild(pageButtons);\r\n    paginationWrapper.appendChild(nextButton);\r\n    paginationContainer.appendChild(paginationWrapper);\r\n  }\r\n\r\n  function createPageButton(pageNum) {\r\n    const button = document.createElement('button');\r\n    button.textContent = pageNum.toString().padStart(2, '0');\r\n    button.className = 'pagination-button page';\r\n\r\n    if (pageNum === currentPage) {\r\n      button.classList.add('active');\r\n    }\r\n\r\n    button.addEventListener('click', () => {\r\n      if (pageNum !== currentPage) {\r\n        currentPage = pageNum;\r\n        getMovies(currentPage);\r\n      }\r\n    });\r\n\r\n    return button;\r\n  }\r\n\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    if (!paginationContainer) {\r\n      const paginationDiv = document.createElement('div');\r\n      paginationDiv.className = 'pagination-container';\r\n      document.querySelector('.movies__list').after(paginationDiv);\r\n    }\r\n\r\n    getMovies();\r\n  });\r\n\r\n  const options = {\r\n    method: 'GET',\r\n    headers: {\r\n      accept: 'application/json',\r\n      Authorization:\r\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0OGFlMTQ1ZTQyYzc4MDQ5YjI3Y2MwY2NhZWU1NGE3NSIsIm5iZiI6MTc0MzYzNzA0MC4yMzksInN1YiI6IjY3ZWRjYTMwMDM1NDBjZjhlNTYyODgwNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.tuTxlFoUnsTSw7K5siU94XHqec4Jgt-IVZeRxvzIv2Y',\r\n    },\r\n  };\r\n\r\n  fetch('https://api.themoviedb.org/3/trending/all/day?language=en-US', options)\r\n    .then(res => res.json())\r\n    .then(res => console.log(res))\r\n    .catch(err => console.error(err));\r\n ","// @murselsen\r\nimport './js/navbar.js';\r\nimport './js/hero.js';\r\n// @AlperKale\r\nimport { showLoader, hideLoader } from './js/loader.js';\r\nimport './js/scroll-up.js';\r\n// @sumeyyeterzi\r\nimport './js/errorModal.js';\r\n// @RoyalNegative\r\nimport './js/movies.js';\r\n// @erdem6161\r\nimport './js/footer.js';\r\nimport './js/members-modal.js';\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // Sayfanın tamamen yüklenmesini bekleyelim\r\n  // Bu sırada showLoader'ı çağırarak loader'ı gösteriyoruz\r\n  showLoader();\r\n  \r\n  // Sayfa tamamen yüklendiğinde loader'ı gizle\r\n  window.addEventListener('load', () => {\r\n    // Loader'ı gizle\r\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\r\n    setTimeout(() => {\r\n      hideLoader();\r\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\r\n  });\r\n});"],"names":["moviesList","paginationContainer","currentPage","totalPages","searchQuery","searchTimeout","searchInput","searchbtn","clearSearchBtn","alert","getMovies","page","showLoader","options","endpoint","data","movie","li","_","index","renderMovieInfoPopup","renderPagination","err","hideLoader","paginationWrapper","prevButton","pageButtons","startPage","endPage","firstPageBtn","createPageButton","ellipsis","pageBtn","lastPageBtn","nextButton","pageNum","button","paginationDiv","res"],"mappings":"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"}