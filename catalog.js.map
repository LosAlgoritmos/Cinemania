{"version":3,"file":"catalog.js","sources":["../src/js/movies.js","../src/catalog.js"],"sourcesContent":["import { showLoader, hideLoader, fetchWithLoader } from './loader.js';\nimport { renderMovieInfoPopup } from './infoPopup.js';\nconst moviesList = document.querySelector('.movies__list-items');\nconst paginationContainer = document.querySelector('.pagination-container');\n\nlet currentPage = 1;\nlet totalPages = 0;\n\nlet searchQuery = '';\nlet searchTimeout;\n\nconst searchInput = document.querySelector('.movies__search');\nconst searchbtn = document.querySelector('#catalog-search-btn');\nconst clearSearchBtn = document.querySelector('.clear-search');\n\n\n\n\n  searchInput.addEventListener('input', e => {\n    searchQuery = e.target.value.trim();\n\n    // Temizleme butonunun görünürlüğünü kontrol et\n    if (searchQuery) {\n      clearSearchBtn.classList.add('visible');\n    } else {\n      clearSearchBtn.classList.remove('visible');\n    }\n\n    clearTimeout(searchTimeout);\n\n    searchTimeout = setTimeout(() => {\n      currentPage = 1;\n      getMovies(currentPage);\n    }, 500);\n  });\n\n\n  // Temizleme butonuna tıklama olayı ekle\n  clearSearchBtn.addEventListener('click', () => {\n    searchInput.value = '';\n    searchQuery = '';\n    clearSearchBtn.classList.remove('visible');\n    currentPage = 1;\n    getMovies(currentPage);\n  });\n\n  async function getMovies(page = 1) {\n    showLoader();\n    try {\n      const options = {\n        method: 'GET',\n        headers: {\n          accept: 'application/json',\n          Authorization:\n            'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0OGFlMTQ1ZTQyYzc4MDQ5YjI3Y2MwY2NhZWU1NGE3NSIsIm5iZiI6MTc0MzYzNzA0MC4yMzksInN1YiI6IjY3ZWRjYTMwMDM1NDBjZjhlNTYyODgwNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.tuTxlFoUnsTSw7K5siU94XHqec4Jgt-IVZeRxvzIv2Y',\n        },\n      };\n\n      // Arama sorgusu varsa search endpoint'ini kullan, yoksa trending endpoint'ini kullan\n      const endpoint = searchQuery\n        ? `https://api.themoviedb.org/3/search/movie?query=${encodeURIComponent(\n            searchQuery\n          )}&language=en-US&page=${page}`\n        : `https://api.themoviedb.org/3/trending/all/day?language=en-US&page=${page}`;\n\n      const response = await fetch(endpoint, options);\n      const data = await response.json();\n\n      totalPages = data.total_pages;\n\n      moviesList.innerHTML = '';\n\n      // Sonuç yoksa mesaj göster\n      if (data.results.length === 0) {\n        moviesList.innerHTML = `\n        <li class=\"no-results\">\n          <h2>OOPS...</h2>\n          <p>We are very sorry!</p>\n          <p>We don't have any results matching your search.</p>\n        </li>\n      `;\n        paginationContainer.innerHTML = '';\n        return;\n      }\n\n      // Render movies\n      data.results.forEach(movie => {\n        const li = document.createElement('li');\n        li.className = 'movies__list-item';\n\n        // Set up background with gradient overlay and poster image\n        li.style.background =\n          'linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))';\n        li.style.backgroundImage = `url(https://image.tmdb.org/t/p/original${movie.poster_path})`;\n\n        // Note: No inline dimensions - CSS handles these now\n        const stars = [\n          `<span class=\"star star-outline\"></span>`,\n          `<span class=\"star star-outline\"></span>`,\n          `<span class=\"star star-outline\"></span>`,\n          `<span class=\"star star-outline\"></span>`,\n          `<span class=\"star star-outline\"></span>`,\n        ];\n        for (let i = 0; i <= movie.vote_average / 2; i++) {\n          stars[i] = `<span class=\"star star\"></span>`;\n        }\n        li.innerHTML = `\n        <div class=\"movies__list-item-info\">\n          <div class=\"movies__list-item-info-container\">\n            <h3 class=\"movies__list-item-title\">${\n              movie.title || movie.name\n            }</h3>\n            <p class=\"movies__list-item-description\">${\n              movie.release_date || movie.first_air_date || ''\n            }</p>\n          </div>\n          <div class=\"movies__list-item-rating\">\n            ${stars.join('')}\n          </div>\n        </div>\n      `;\n      li.addEventListener('click', () => {\n        renderMovieInfoPopup(movie);\n      });\n\n        moviesList.appendChild(li);\n      });\n\n      renderPagination();\n    } catch (err) {\n      console.error('Error fetching movies:', err);\n      moviesList.innerHTML =\n        '<li class=\"error-message\">Filmler yüklenirken bir hata oluştu.</li>';\n    } finally {\n      hideLoader();\n    }\n  }\n\n  function renderPagination() {\n    paginationContainer.innerHTML = '';\n    const paginationWrapper = document.createElement('div');\n    paginationWrapper.className = 'pagination-wrapper';\n\n    const prevButton = document.createElement('button');\n    prevButton.innerHTML = '<';\n    prevButton.className = 'pagination-button prev';\n    prevButton.disabled = currentPage === 1;\n    prevButton.addEventListener('click', () => {\n      if (currentPage > 1) {\n        currentPage--;\n        getMovies(currentPage);\n      }\n    });\n\n    const pageButtons = document.createElement('div');\n    pageButtons.className = 'pagination-pages';\n\n    let startPage = Math.max(1, currentPage - 1);\n    let endPage = Math.min(totalPages, startPage + 2);\n\n    if (endPage === totalPages) {\n      startPage = Math.max(1, endPage - 2);\n    }\n\n    if (startPage > 1) {\n      const firstPageBtn = createPageButton(1);\n      pageButtons.appendChild(firstPageBtn);\n\n      if (startPage > 2) {\n        const ellipsis = document.createElement('span');\n        ellipsis.textContent = '...';\n        ellipsis.className = 'pagination-ellipsis';\n        pageButtons.appendChild(ellipsis);\n      }\n    }\n\n    for (let i = startPage; i <= endPage; i++) {\n      const pageBtn = createPageButton(i);\n      pageButtons.appendChild(pageBtn);\n    }\n\n    if (endPage < totalPages) {\n      if (endPage < totalPages - 1) {\n        const ellipsis = document.createElement('span');\n        ellipsis.textContent = '...';\n        ellipsis.className = 'pagination-ellipsis';\n        pageButtons.appendChild(ellipsis);\n      }\n\n      const lastPageBtn = createPageButton(totalPages);\n      pageButtons.appendChild(lastPageBtn);\n    }\n\n    const nextButton = document.createElement('button');\n    nextButton.innerHTML = '>';\n    nextButton.className = 'pagination-button next';\n    nextButton.disabled = currentPage === totalPages;\n    nextButton.addEventListener('click', () => {\n      if (currentPage < totalPages) {\n        currentPage++;\n        getMovies(currentPage);\n      }\n    });\n\n    paginationWrapper.appendChild(prevButton);\n    paginationWrapper.appendChild(pageButtons);\n    paginationWrapper.appendChild(nextButton);\n    paginationContainer.appendChild(paginationWrapper);\n  }\n\n  function createPageButton(pageNum) {\n    const button = document.createElement('button');\n    button.textContent = pageNum.toString().padStart(2, '0');\n    button.className = 'pagination-button page';\n\n    if (pageNum === currentPage) {\n      button.classList.add('active');\n    }\n\n    button.addEventListener('click', () => {\n      if (pageNum !== currentPage) {\n        currentPage = pageNum;\n        getMovies(currentPage);\n      }\n    });\n\n    return button;\n  }\n\n  document.addEventListener('DOMContentLoaded', () => {\n    if (!paginationContainer) {\n      const paginationDiv = document.createElement('div');\n      paginationDiv.className = 'pagination-container';\n      document.querySelector('.movies__list').after(paginationDiv);\n    }\n\n    getMovies();\n  });\n\n \n","// @murselsen\nimport './js/navbar.js';\nimport './js/hero.js';\n// @AlperKale\nimport { showLoader, hideLoader } from './js/loader.js';\nimport './js/scroll-up.js';\n// @sumeyyeterzi\nimport './js/errorModal.js';\n// @RoyalNegative\nimport './js/movies.js';\n// @erdem6161\nimport './js/footer.js';\nimport './js/members-modal.js';\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Sayfanın tamamen yüklenmesini bekleyelim\n  // Bu sırada showLoader'ı çağırarak loader'ı gösteriyoruz\n  showLoader();\n  \n  // Sayfa tamamen yüklendiğinde loader'ı gizle\n  window.addEventListener('load', () => {\n    // Loader'ı gizle\n    // hideLoader fonksiyonu zaten minimum gösterim süresini dikkate alacak\n    setTimeout(() => {\n      hideLoader();\n    }, 500); // Sayfanın tam yüklenmesinden sonra 0.5 saniye daha bekle\n  });\n});"],"names":["moviesList","paginationContainer","currentPage","totalPages","searchQuery","searchTimeout","searchInput","clearSearchBtn","getMovies","page","showLoader","options","endpoint","data","movie","li","stars","i","renderMovieInfoPopup","renderPagination","err","hideLoader","paginationWrapper","prevButton","pageButtons","startPage","endPage","firstPageBtn","createPageButton","ellipsis","pageBtn","lastPageBtn","nextButton","pageNum","button","paginationDiv"],"mappings":"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"}